{"ast":null,"code":"var request = require('request');\nvar cheerio = require('cheerio');\nvar _ = require('underscore');\nmodule.exports = {\n  get: function (artist, song, callback) {\n    var lyrics = \"\";\n    url = 'http://lyrics.wikia.com/wiki/' + artist + ':' + song;\n    request(url, function (error, response, html) {\n      if (error) {\n        callback(error, null);\n      } else {\n        var $ = cheerio.load(html);\n        $('script').remove();\n        var lyrics = $('.lyricbox').html();\n\n        /**\n         * Override default underscore escape map\n         */\n        var escapeMap = {\n          '&': '&amp;',\n          '<': '&lt;',\n          '>': '&gt;',\n          '\"': '&quot;',\n          \"'\": '&#x27;',\n          \"'\": '&apos;',\n          '`': '&#x60;',\n          '': '\\n'\n        };\n        var unescapeMap = _.invert(escapeMap);\n        var createEscaper = function (map) {\n          var escaper = function (match) {\n            return map[match];\n          };\n          var source = '(?:' + _.keys(map).join('|') + ')';\n          var testRegexp = RegExp(source);\n          var replaceRegexp = RegExp(source, 'g');\n          return function (string) {\n            string = string == null ? '' : '' + string;\n            return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n          };\n        };\n        _.escape = createEscaper(escapeMap);\n        _.unescape = createEscaper(unescapeMap);\n\n        // replace html codes with punctuation\n        lyrics = _.unescape(lyrics);\n        // remove everything between brackets\n        lyrics = lyrics.replace(/\\[[^\\]]*\\]/g, '');\n        // remove html comments\n        lyrics = lyrics.replace(/(<!--)[^-]*-->/g, '');\n        // replace newlines\n        lyrics = lyrics.replace(/<br>/g, '\\n');\n        // remove all tags\n        lyrics = lyrics.replace(/<[^>]*>/g, '');\n\n        //console.log(lyrics);\n        if (lyrics != \"\") {\n          callback(null, lyrics);\n        } else {\n          callback(\"not found\", null);\n        }\n      }\n    });\n  }\n};","map":{"version":3,"names":["request","require","cheerio","_","module","exports","get","artist","song","callback","lyrics","url","error","response","html","$","load","remove","escapeMap","unescapeMap","invert","createEscaper","map","escaper","match","source","keys","join","testRegexp","RegExp","replaceRegexp","string","test","replace","escape","unescape"],"sources":["C:/Users/Microsoft/OneDrive/Documents/c prgramming/.dist/react js/songProject/my-app/node_modules/lyric-get/index.js"],"sourcesContent":["var request    = require('request');\nvar cheerio    = require('cheerio');\nvar _          = require('underscore');\n\n\nmodule.exports = {\n\tget: function(artist, song, callback) {\n\n\t\tvar lyrics = \"\";\n\n\t\turl = 'http://lyrics.wikia.com/wiki/' + artist + ':' + song;\n\n\n\t\trequest(url, function(error, response, html) {\n\t        if(error)\n\t        {\n\t       \t\tcallback(error, null);\n\t        }\n\t        else\n\t        {\n\t\t        \n\t\t        var $ = cheerio.load(html);\n\t\t        $('script').remove();\n\t\t        var lyrics = ($('.lyricbox').html());\n\n\t\t\t\t/**\n\t\t\t\t * Override default underscore escape map\n\t\t\t\t */\n\t\t\t\tvar escapeMap = {\n\t\t\t\t  '&': '&amp;',\n\t\t\t\t  '<': '&lt;',\n\t\t\t\t  '>': '&gt;',\n\t\t\t\t  '\"': '&quot;',\n\t\t\t\t  \"'\": '&#x27;',\n\t\t\t\t  \"'\": '&apos;',\n\t\t\t\t  '`': '&#x60;',\n\t\t\t\t  '' : '\\n'\n\t\t\t\t};\n\n\t\t\t\tvar unescapeMap = _.invert(escapeMap);\n\t\t\t\tvar createEscaper = function(map) {\n\t\t\t\t  var escaper = function(match) {\n\t\t\t\t    return map[match];\n\t\t\t\t  };\n\n\t\t\t\t  var source = '(?:' + _.keys(map).join('|') + ')';\n\t\t\t\t  var testRegexp = RegExp(source);\n\t\t\t\t  var replaceRegexp = RegExp(source, 'g');\n\t\t\t\t  return function(string) {\n\t\t\t\t    string = string == null ? '' : '' + string;\n\t\t\t\t    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n\t\t\t\t  };\n\t\t\t\t};\n\t\t\t\t_.escape = createEscaper(escapeMap);\n\t\t\t\t_.unescape = createEscaper(unescapeMap);\n\n\t\t\t\t// replace html codes with punctuation\n\t\t\t\tlyrics = _.unescape(lyrics);\n\t\t\t\t// remove everything between brackets\n\t\t\t\tlyrics = lyrics.replace(/\\[[^\\]]*\\]/g, '');\n\t\t\t\t// remove html comments\n\t\t\t\tlyrics = lyrics.replace(/(<!--)[^-]*-->/g, '');\n\t\t\t\t// replace newlines\n\t\t\t\tlyrics = lyrics.replace(/<br>/g, '\\n');\n\t\t\t\t// remove all tags\n\t\t\t\tlyrics = lyrics.replace(/<[^>]*>/g, '');\n\n\t\t\t\t//console.log(lyrics);\n\t\t        if(lyrics != \"\"){\n\t\t        \tcallback(null, lyrics);\n\t\t        }\n\t\t        else{\n\t\t        \tcallback(\"not found\", null);\n\t\t        }\n\t\t    }\n\t\t});\n\t}\n}"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}